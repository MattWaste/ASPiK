<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ASPiK SDK: Alter the PluginGUI Object</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ASPiK SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('cv5.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Alter the PluginGUI Object </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>With the object designed and the <a class="el" href="class_i_custom_view.html" title="Custom View interface to allow plugin core to create safe communication channels with GUI custom view...">ICustomView</a> interface implemented, you can turn your attention to the plugingui.cpp file. The function that is called to give the object the first opportunity to create a custom view is named createView( ):<br />
 <br />
 <b>CView* PluginGUI::createView(const UIAttributes&amp; attributes, const IUIDescription* description)</b><br />
 <br />
 The attributes and description arguments come from the GUI class factory that calls the method and contains all the information gleaned from the XML description file. One piece of that information is the custom view name, which is what we use to decode the data and instantiate the view. We’ve already setup a secondary function createUserCustomView( ) that will do some of the decoding work for you. You may either append your custom views to that function, or modify the function above. In the case of the waveform and spectrum views we’ll use the secondary function. For other controls, you will need to work inside of createView( ) where you can have access to all of the attribute and description information. You can see that this function is simple - we just decode the name string and then create a new object.<br />
 <br />
 <b>CView* PluginGUI::createUserCustomView(std::string viewname, const CRect rect,  IControlListener* listener, int32_t tag)</b><br />
 {<br />
 &emsp;<b>if (viewname.compare("CustomWaveView") == 0)</b><br />
 &emsp;{<br />
 &emsp;// &mdash; create our custom view<br />
 &emsp;<b>return new WaveView(rect, listener, tag);</b><br />
 &emsp;}<br />
 <br />
 &emsp;<b>return nullptr;</b><br />
 }<br />
 <br />
 The part of createView that calls this function is shown here. This is where the <a class="el" href="class_i_custom_view.html" title="Custom View interface to allow plugin core to create safe communication channels with GUI custom view...">ICustomView</a> pointer is obtained from the newly created object and safely sent to the plugin shell using the <a class="el" href="class_i_g_u_i_plugin_connector.html" title="Custom interface so that GUI can pass information to plugin shell in a thread-safe manner...">IGUIPluginConnector</a> interface pointer that it obtained during its creation:<br />
 <br />
 // &mdash; try a user view first<br />
 <b>CView* userCV = createUserCustomView(viewname, rect, listener, tag);</b><br />
 <b>if (userCV)</b><br />
 {<br />
 &emsp;// &mdash; register custom view it with the plugin for updates &emsp;<b>if (hasICustomView(userCV))</b><br />
 &emsp;{<br />
 &emsp;&emsp;&emsp;<b>if (guiPluginConnector)</b><br />
 &emsp;&emsp;&emsp;<b>guiPluginConnector-&gt;registerCustomView(viewname, dynamic_cast&lt;ICustomView*&gt;(userCV));</b><br />
 &emsp;}<br />
 <br />
 &emsp;<b>return userCV;</b><br />
 }<br />
 <br />
 In this case, the <a class="el" href="class_i_custom_view.html" title="Custom View interface to allow plugin core to create safe communication channels with GUI custom view...">ICustomView</a> is obtained by simply casting the custom view object and that is registered with the <a class="el" href="class_i_g_u_i_plugin_connector.html" title="Custom interface so that GUI can pass information to plugin shell in a thread-safe manner...">IGUIPluginConnector</a> interface. <br />
 <br />
 The SpectrumView object is designed in a similar manner but uses a double-ring-free-buffer scheme (mostly as an example) in its implementation. The <b>createUserCustomView</b> function is then modified to decode the custom view name "CustomSpectrumView" and similarly creates and registers the custom view - see the demo project example for all of the details.<br />
 <br />
 The custom knob view object is designed by subclassing CAnimKnob from VSGUI4 and deriving it from <a class="el" href="class_i_custom_view.html" title="Custom View interface to allow plugin core to create safe communication channels with GUI custom view...">ICustomView</a> so that it exposes the interface. For the knob example, we are just going to show how to set up a communication system with <em>ANY</em> custom view so it does not contain any specialized drawing code. We will simply "talk" to the knob object and get a reply from it as proof of concept for your own custom views. You can find the code that decodes, creates and registers this custom knob in the <b>PluginGUI::createView( )</b> function, just below the portion of code that calls our added function <b>createUserCustomView( )</b> above.<br />
 <br />
 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">ASPiK Developer&#39;s Guide</a></li><li class="navelem"><a class="el" href="gui_design.html">Design a GUI</a></li><li class="navelem"><a class="el" href="define_g_u_i6.html">Advanced GUI Topics</a></li><li class="navelem"><a class="el" href="gui_designer11.html">Custom Views</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
