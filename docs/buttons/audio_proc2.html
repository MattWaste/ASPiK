<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ASPiK SDK: Audio Input and Output Samples</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ASPiK SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('audio_proc2.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Audio Input and Output Samples </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>We will need to decode the <a class="el" href="struct_channel_i_o_config.html" title="Structure of a pair of channel format enumerators that set an input/output channel I/O capability...">ChannelIOConfig</a> variable for the audio data and pick up the audio input data samples, process them, and then write our audio outputs into the <em>audioOutputFrame array</em> according to the output channel IO configuration. You may adapt this code as your plug requires it. The stock <em>processAudioFrame</em> function your plugin is created with looks something like this at the head of the function. <br />
 <br />
 // &mdash; fire any MIDI events for this sample interval<br />
 <b>processFrameInfo.midiEventQueue-&gt;fireMidiEvents(processFrameInfo.currentFrame);</b><br />
 <br />
 // &mdash; do per-frame updates; VST automation and parameter smoothing<br />
 <b>doSampleAccurateParameterUpdates();</b><br />
 <br />
 // &mdash; Synth or FX Plugin?<br />
 <b>if (getPluginType() == kFXPlugin)</b><br />
 {<br />
 do FX stuff<br />
 }<br />
 <br />
 From this point on, we will assume that we are processing for a FX plugin and weâ€™ll omit those enclosing curly brackets for brevity. All ASPiK plugins will by default accommodate mono-mono, mono-stereo and stereo-stereo formats. You can add more channel formats as you like. Each new blank ASPiK plugin will pass audio from input to output directly. You will then modify the code to do some meaningful processing. The audio data samples arrive in slots in the <em>audioInputFrame</em> and <em>audioOutputFrame</em> arrays and we use standard C++ array notation to access them. We might write something like this to pick up the input samples, process them through some interesting audio processing function then and pass the resulting samples to the outputs:<br />
 <br />
 // &mdash; get left and right input samples<br />
 <b>double xn_L = processFrameInfo.audioInputFrame[0];</b><br />
 <b>double xn_R = processFrameInfo.audioInputFrame[1];</b><br />
 <br />
 // &mdash; process them to create outputs<br />
 <b>double yn_L = doSomeCoolAudioProcessing(xn_L);</b><br />
 <b>double yn_R = doSomeCoolAudioProcessing(xn_R);</b><br />
 <br />
 // &mdash; send audio out<br />
 <b>processFrameInfo.audioOutputFrame[0] = yn_L;</b><br />
 <b>processFrameInfo.audioOutputFrame[1] = yn_R;</b><br />
 <br />
 From this example, it should be obvious how to pick up input samples and write output samples. If we were processing a 5.1 input, we might write something like this instead:<br />
 <br />
 <b>double leftIn = processFrameInfo.audioInputFrame[0];</b><br />
 <b>double rightIn = processFrameInfo.audioInputFrame[1];</b><br />
 <b>double lfeIn = processFrameInfo.audioInputFrame[2];</b><br />
 <b>double leftSurroundIn = processFrameInfo.audioInputFrame[3];</b><br />
 <b>double rightSurroundIn= processFrameInfo.audioInputFrame[4];</b><br />
 <br />
 To decode our three I/O combinations, we use the following code:<br />
 <br />
 // &mdash; Mono-In/Mono-Out<br />
 <b>if(processFrameInfo.channelIOConfig.inputChannelFormat == kCFMono &amp;&amp; <br />
 &emsp;processFrameInfo.channelIOConfig.outputChannelFormat = kCFMono)</b><br />
 {<br />
 &emsp;// &mdash; DO mono-in &ndash;&gt; mono out processing<br />
 }<br />
</p>
<p>// &mdash; Mono-In/Stereo-Out<br />
 <b>if(processFrameInfo.channelIOConfig.inputChannelFormat == kCFMono &amp;&amp;<br />
 &emsp;processFrameInfo.channelIOConfig.outputChannelFormat == kCFStereo)</b><br />
 {<br />
 &emsp;// &mdash; DO mono-in &ndash;&gt; stereo out processing<br />
 }<br />
</p>
<p>// &mdash; Stereo-In/Stereo-Out<br />
 <b>if(processFrameInfo.channelIOConfig.inputChannelFormat == kCFStereo &amp;&amp;<br />
 &emsp;processFrameInfo.channelIOConfig.outputChannelFormat == kCFStereo)</b><br />
 {<br />
 &emsp;// &mdash; DO stereo-in &ndash;&gt; stereo out processing<br />
 }<br />
 <br />
 You can modify the channel decoding logic to suit your own taste. One thing to note is that this function (like all of the <a class="el" href="class_plugin_base.html" title="The PluginBase object is the base class for the Plugin Core object. ">PluginBase</a> functions) returns a boolean variable to signify whether we actually processed data or not. We can return true from inside each of those curly bracket sets and return false if none of our channel combinations are supported. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">ASPiK Developer&#39;s Guide</a></li><li class="navelem"><a class="el" href="simple_plugin.html">Write a Plugin</a></li><li class="navelem"><a class="el" href="define_plugin8.html">Processing the Audio Data</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
